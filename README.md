
# 🎰 로또 번호 추천 시스템

Flask와 Docker를 사용한 로또 번호 추천 웹 애플리케이션입니다.

## 📋 추가/변경된 주요 기능 (2025.09 기준)

- **과거 1등 번호와 겹치지 않는 번호 추천**: "로또 번호 생성" 시, 과거 1등 번호 조합과 완전히 일치하지 않는 새로운 번호만 추천합니다.
- **내 번호 목록 삭제 기능**: 저장된 내 번호를 목록에서 개별 삭제할 수 있습니다.
- **보너스 번호/불필요 문구 미노출**: 생성 결과 화면에는 메인 번호만 표시, 보너스 번호와 장식 문구는 숨김 처리.
- **UI/UX 개선**: 버튼 한 줄 표시, 이모지/장식 제거, 불필요한 버튼/문구 삭제, 반응형 개선.
- **당첨 결과 자동 조회**: 내 번호 목록에서 추첨일이 지난 번호는 자동으로 당첨 결과를 조회해 보여줍니다.
- **API/백엔드 개선**: `/generate` 엔드포인트가 과거 1등 번호와 겹치지 않는 번호만 반환하도록 로직 개선.

---

## 📋 전체 기능 (정리)

- **로그인/회원가입/비밀번호 변경/관리자 기능**
- **로또 번호 생성 (AI 분석 기반, 과거 1등 번호와 겹치지 않음)**
- **내 번호 목록 저장/삭제/조회, 당첨 결과 자동 확인**
- **로또 1등 번호 전체 조회**
- **반응형 UI, 실시간 생성, 행운 메시지**
- **Docker/Nginx 지원**


## 🚀 빠른 시작

### 필요 조건
- Docker
- Docker Compose

### 1. 프로젝트 구조 생성

다음과 같은 폴더 구조를 만들어주세요:

```
lotto-app/
├── app.py
├── requirements.txt
├── Dockerfile
├── docker-compose.yml
├── nginx.conf (선택사항)
├── templates/
│   └── index.html
└── README.md
```

### 2. 애플리케이션 실행

#### 개발 환경 (Flask만 사용)
```bash
# 1. 프로젝트 디렉토리로 이동
cd lotto-app

# 2. Docker 이미지 빌드 및 실행
docker-compose up --build
```

#### 프로덕션 환경 (Nginx + Flask)
```bash
# Nginx 프록시와 함께 실행
docker-compose --profile production up --build
```

### 3. 웹 사이트 접속

- **개발 환경**: http://localhost:5000
- **프로덕션 환경**: http://localhost

## 📋 기능

- **사용자 로그인/회원가입**: 로그인한 사용자만 로또 번호 생성 서비스 및 1등번호 전체조회 이용 가능 (기본 계정: admin / admin1234)
- **사용자 관리**: 회원가입, 비밀번호 변경, 계정 삭제(관리자만 가능), 사용자 목록(관리자만 조회)
- **비밀번호 암호화 저장**: 모든 사용자 비밀번호는 암호화되어 저장(관리자 제외)
- **관리자 기능**: 관리자(admin)는 사용자 목록 조회 및 계정 삭제 가능(관리자 계정은 삭제 불가)
- **로또 번호 생성**: 1-45 범위에서 중복되지 않는 6개의 번호 생성
- **보너스 번호**: 메인 번호와 중복되지 않는 보너스 번호 생성
- **로또 1등번호 전체조회**: 1회~최신회차까지의 1등번호를 한눈에 확인(로그인 시 메뉴에서 접근)
- **행운의 메시지**: 랜덤한 응원 메시지 제공
- **반응형 디자인**: 모바일과 데스크톱 모두 지원
- **실시간 생성**: 버튼 클릭 시 즉시 새로운 번호 생성
- **내 번호 목록 저장/조회**: 생성된 번호를 '내 번호 목록'에 저장할 수 있습니다. 각 번호는 저장 시점(선택일)과 함께 저장됩니다.
- **선택일 기준 추첨일 자동 계산**: 저장된 번호별로 선택일 기준 해당 주 토요일(로또 추첨일)을 자동 계산하여 표시합니다.
- **당첨 결과 자동 조회**: 추첨일이 지난 경우, 해당 추첨일에 해당하는 회차의 1등 번호와 비교하여 당첨 결과를 자동으로 조회해 보여줍니다.
- **미추첨 표시**: 추첨일이 아직 오지 않은 경우 '미추첨'으로 표시됩니다.
- **회차별 당첨조회 지원**: `/check-my-lotto` API가 특정 회차(추첨일 기준)로도 조회할 수 있도록 확장되었습니다.

## 🛠️ 기술 스택

- **Backend**: Python Flask, Flask-Login (사용자 인증)
- **Frontend**: HTML, CSS, JavaScript
- **Container**: Docker, Docker Compose
- **Web Server**: Nginx (프로덕션 환경)

## 📁 주요 파일 설명

- `app.py`: Flask 웹 애플리케이션 메인 파일 (로그인/로그아웃/인증 포함)
- `templates/index.html`: 메인 페이지 템플릿 (로그인 사용자 이름, 로그아웃 버튼, "로또 번호 생성", "로또 1등번호 조회" 버튼 표시)
- `templates/login.html`: 로그인 폼 템플릿
- `templates/register.html`: 회원가입 폼 템플릿
- `templates/change_password.html`: 비밀번호 변경 폼 템플릿
- `templates/user_list.html`: 사용자 목록(관리자 전용)
- `templates/lotto_winners.html`: 로또 1등번호 전체조회 페이지
- `requirements.txt`: Python 패키지 의존성 (Flask, Flask-Login 등)
- `Dockerfile`: Docker 이미지 빌드 설정
- `docker-compose.yml`: 서비스 구성 파일
- `nginx.conf`: Nginx 설정 (프로덕션용)

## 🎯 사용법

1. 웹 사이트에 접속하면 로그인 페이지가 나타납니다.
2. 기본 관리자 계정으로 로그인 (아이디: admin / 비밀번호: admin1234) 또는 회원가입 후 로그인
3. 로그인 후 "로또 번호 생성" 버튼을 클릭해 번호를 생성하거나, "로또 1등번호 조회" 버튼을 클릭해 1등번호 전체를 확인할 수 있습니다.
4. (관리자) 우측 상단의 "사용자 목록"에서 회원 관리가 가능합니다.
5. 우측 상단에서 로그아웃할 수 있습니다.
6. "내 번호 목록"에서 저장된 번호와 추첨 결과를 확인할 수 있습니다.